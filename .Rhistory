#save scores as dataframe
nmds_scores_24_subset <- as.data.frame(scores(nmds_result_24_subset$points))
#extract centroids for each treatment
group_centroids <- data.frame(
Treatment = c("Cage", "Control", "Roof"),
Centroid_X = c(mean(nmds_scores_24_subset$MDS1[exp_data_24_dates$Treatment == "Cage"]),
mean(nmds_scores_24_subset$MDS1[exp_data_24_dates$Treatment == "Control"]),
mean(nmds_scores_24_subset$MDS1[exp_data_24_dates$Treatment == "Roof"])),
Centroid_Y = c(mean(nmds_scores_24_subset$MDS2[exp_data_24_dates$Treatment == "Cage"]),
mean(nmds_scores_24_subset$MDS2[exp_data_24_dates$Treatment == "Control"]),
mean(nmds_scores_24_subset$MDS2[exp_data_24_dates$Treatment == "Roof"]))
)
#create distance matrix for PERMANOVA
perm_dist_2024_subset <- vegdist(exp_data_matrix_subset, method = 'bray')
#check assumptions
dispersion <- betadisper(perm_dist_2024_subset, group = exp_data_24_dates$Treatment, type = "centroid")
plot(dispersion)
anova(dispersion)
permanova_exp_24_subset <- adonis2(perm_dist_2024_subset~as.factor(exp_data_24_dates$Treatment), data = perm_dist_2024_subset, permutations = 9999)
permanova_exp_24_subset
write.csv(permanova_exp_24_subset, file = "../Results/Permanova_results_subset.csv")
pairwise_subset <-pairwise.adonis(perm_dist_2024_subset,factors=exp_data_24_dates$Treatment)
pairwise_subset
write.csv(pairwise_subset, file = "../Results/PostHoc_Results_subset.csv")
=======
exp_data_24_clean <- exp_data_24_clean[exp_data_24_clean$Date >= "2024-09-01" & exp_data_24_clean$Date <= "2024-09-30",]
#delete unnecesssary columns (ones that were combined to better metrics)
exp_data_24_clean <- subset(exp_data_24_clean, select= -c(Chthamalus, Amphibalanus, Tetraclita, Megabalanus, Tetraclita_dead, Dark.Brown.Barnacle..look.up.later., Fleshy_algae, Algal_crust, sum ))
#subset data for matrix
exp_data_matrix <- exp_data_24_clean[,7:27]
#subset data for matrix
exp_data_matrix <- exp_data_24_clean[,7:21]
#run NMDS with bray-curtis dissamilarity
set.seed(2)
nmds_result_24 <- metaMDS(exp_data_matrix, distance = "bray")
#save scores as dataframe
nmds_scores_24 <- as.data.frame(scores(nmds_result_24$points))
#extract centroids for each treatment
group_centroids_site <- data.frame(
Site = c("Cage", "Control"),
Centroid_X = c(mean(nmds_scores_24$MDS1[exp_data_24_clean$Site == "North"]),
mean(nmds_scores_24$MDS1[exp_data_24_clean$Site == "South"])),
Centroid_Y = c(mean(nmds_scores_24$MDS2[exp_data_24_clean$Site == "North"]),
mean(nmds_scores_24$MDS2[exp_data_24_clean$Site == "South"]))
)
#create distance matrix for PERMANOVA
perm_dist_2024_site <- vegdist(exp_data_matrix, method = 'bray')
#check assumptions
dispersion <- betadisper(perm_dist_2024_site, group = exp_data_24_clean$Site, type = "centroid")
plot(dispersion)
anova(dispersion)
permanova_exp_24_site <- adonis2(perm_dist_2024_site~as.factor(exp_data_24_clean$Site), data = perm_dist_2024_site, permutations = 9999)
permanova_exp_24_site
# Load necessary libraries
library(ggplot2)
# Assuming you have already loaded the datasets exp_data_24_dates and nmds_scores_24_subset
# Merge the Treatment column from exp_data_24_dates with the NMDS scores
plot_data_site <- data.frame(
Treatment = exp_data_24_clean$Site,
NMDS1 = nmds_scores_24$MDS1,
NMDS2 = nmds_scores_24$MDS2
)
# Create the plot with custom colors
ggplot(plot_data_site, aes(x = NMDS1, y = NMDS2, color = Treatment)) +
geom_point(size = 3) +  # Add points with size
stat_ellipse(type = "t", level = 0.95) +  # Add ellipses around each group with 95% confidence interval
scale_color_manual(values = c(
"North" = "#57733C",
"South" = "#592246"
)) +  # Manually specify the colors for each Treatment
labs(
title = "NMDS Plot by Treatment",
x = "NMDS1",
y = "NMDS2",
color = "Treatment"
) +
theme_minimal()  # Use a minimal theme for the plot
write.csv(permanova_exp_24_site, file = "../Results/Permanova_results_subset_site.csv")
>>>>>>> Stashed changes
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(vegan)
library(readxl)
#tutorial - https://www.youtube.com/watch?v=1CFrNL3Fuqk
#load data
setwd("/Users/sarahsellke/Documents/GitHub/Tropical_Predation_Panama")
exp_data_24_clean <- read.csv("../Data/exp_data_24_clean.csv")
setwd("~/Documents/GitHub/Tropical_Predation_Panama")
exp_data_24_clean <- read.csv("../Data/exp_data_24_clean.csv")
#sum all barnacles
exp_data_24_clean$All_Barnacle <- exp_data_24_clean$Chthamalus + exp_data_24_clean$Amphibalanus + exp_data_24_clean$Tetraclita + exp_data_24_clean$Megabalanus + exp_data_24_clean$Tetraclita_dead + exp_data_24_clean$Dark.Brown.Barnacle..look.up.later.
#sum all algae except corraline
exp_data_24_clean$all_algae <- exp_data_24_clean$Fleshy_algae + exp_data_24_clean$Algal_crust
#convert dates to date format
class(exp_data_24_clean$Date)
exp_data_24_clean$Date <- as.Date(exp_data_24_clean$Date, format = "%m/%d/%Y")
#only include dates outside feb
exp_data_24_end <- exp_data_24_clean[exp_data_24_clean$Date >= "2024-09-01" & exp_data_24_clean$Date <= "2024-09-30",]
#delete unnecesssary columns (ones that were combined to better metrics)
exp_data_24_end <- subset(exp_data_24_end, select= -c(Chthamalus, Amphibalanus, Tetraclita, Megabalanus, Tetraclita_dead, Dark.Brown.Barnacle..look.up.later., Fleshy_algae, Algal_crust, sum ))
#subset data for matrix
exp_data_matrix_subset_end <- exp_data_24_end[,7:21]
#run NMDS with bray-curtis dissamilarity
set.seed(2)
nmds_result_24_subset_end <- metaMDS(exp_data_matrix_subset_end, distance = "bray")
#save scores as dataframe
nmds_scores_24_subset_end <- as.data.frame(scores(nmds_result_24_subset_end$points))
#extract centroids for each treatment
group_centroids <- data.frame(
Treatment = c("Cage", "Control", "Roof"),
Centroid_X = c(mean(nmds_scores_24_subset_end$MDS1[exp_data_24_end$Treatment == "Cage"]),
mean(nmds_scores_24_subset_end$MDS1[exp_data_24_end$Treatment == "Control"]),
mean(nmds_scores_24_subset_end$MDS1[exp_data_24_end$Treatment == "Roof"])),
Centroid_Y = c(mean(nmds_scores_24_subset_end$MDS2[exp_data_24_end$Treatment == "Cage"]),
mean(nmds_scores_24_subset_end$MDS2[exp_data_24_end$Treatment == "Control"]),
mean(nmds_scores_24_subset_end$MDS2[exp_data_24_end$Treatment == "Roof"]))
)
#create dataframe for plot - confusing dont use yet
plot_data <- data.frame(
Treatment = exp_data_24_end$Treatment,
NMDS1 = nmds_scores_24_subset_end$MDS1,
NMDS2 = nmds_scores_24_subset_end$MDS2
)
#create distance matrix for PERMANOVA
perm_dist_2024_subset_end <- vegdist(exp_data_matrix_subset_end, method = 'bray')
#check assumptions
dispersion_end <- betadisper(perm_dist_2024_subset_end, group = exp_data_24_end$Treatment, type = "centroid")
plot(dispersion_end)
anova(dispersion_end)
permanova_exp_24_subset_end <- adonis2(perm_dist_2024_subset_end~as.factor(exp_data_24_end$Treatment), data = perm_dist_2024_subset_end, permutations = 9999)
permanova_exp_24_subset_end
write.csv(permanova_exp_24_subset_end, file = "../Results/Permanova_results_subset_enddate.csv")
#load tools for post hoc
library(devtools)
library(cluster)
library(lattice)
library(pairwiseAdonis)
pairwise_subset_end <-pairwise.adonis(perm_dist_2024_subset_end,factors=exp_data_24_end$Treatment)
pairwise_subset_end
write.csv(pairwise_subset_end, file = "../Results/PostHoc_Results_subset_enddate.csv")
# Load necessary libraries
library(ggplot2)
# Assuming you have already loaded the datasets exp_data_24_dates and nmds_scores_24_subset
# Merge the Treatment column from exp_data_24_dates with the NMDS scores
plot_data_end <- data.frame(
Treatment = exp_data_24_end$Treatment,
NMDS1 = nmds_scores_24_subset_end$MDS1,
NMDS2 = nmds_scores_24_subset_end$MDS2
)
# Create the plot with custom colors
ggplot(plot_data_end, aes(x = NMDS1, y = NMDS2, color = Treatment)) +
geom_point(size = 3) +  # Add points with size
stat_ellipse(type = "t", level = 0.95) +  # Add ellipses around each group with 95% confidence interval
scale_color_manual(values = c(
"Cage" = "#A9C6D9",
"Control" = "#57733C",
"Roof" = "#8C6020"
)) +  # Manually specify the colors for each Treatment
labs(
title = "NMDS Plot by Treatment",
x = "NMDS1",
y = "NMDS2",
color = "Treatment"
) +
theme_minimal()  # Use a minimal theme for the plot
knitr::opts_chunk$set(echo = TRUE)
#sum all barnacles
exp_data_24_clean$All_Barnacle <- exp_data_24_clean$Chthamalus + exp_data_24_clean$Amphibalanus + exp_data_24_clean$Tetraclita + exp_data_24_clean$Megabalanus + exp_data_24_clean$Tetraclita_dead + exp_data_24_clean$Dark.Brown.Barnacle..look.up.later.
#sum all algae except corraline
exp_data_24_clean$all_algae <- exp_data_24_clean$Fleshy_algae + exp_data_24_clean$Algal_crust
#convert dates to date format
class(exp_data_24_clean$Date)
exp_data_24_clean$Date <- as.Date(exp_data_24_clean$Date, format = "%m/%d/%Y")
#only include dates outside feb
exp_data_24_clean <- exp_data_24_clean[exp_data_24_clean$Date >= "2024-09-01" & exp_data_24_clean$Date <= "2024-09-30",]
#delete unnecesssary columns (ones that were combined to better metrics)
exp_data_24_clean <- subset(exp_data_24_clean, select= -c(Chthamalus, Amphibalanus, Tetraclita, Megabalanus, Tetraclita_dead, Dark.Brown.Barnacle..look.up.later., Fleshy_algae, Algal_crust, sum ))
#subset data for matrix
exp_data_matrix <- exp_data_24_clean[,7:21]
#run NMDS with bray-curtis dissamilarity
set.seed(2)
nmds_result_24 <- metaMDS(exp_data_matrix, distance = "bray")
#save scores as dataframe
nmds_scores_24 <- as.data.frame(scores(nmds_result_24$points))
#extract centroids for each treatment
group_centroids_site <- data.frame(
Site = c("Cage", "Control"),
Centroid_X = c(mean(nmds_scores_24$MDS1[exp_data_24_clean$Site == "North"]),
mean(nmds_scores_24$MDS1[exp_data_24_clean$Site == "South"])),
Centroid_Y = c(mean(nmds_scores_24$MDS2[exp_data_24_clean$Site == "North"]),
mean(nmds_scores_24$MDS2[exp_data_24_clean$Site == "South"]))
)
#check assumptions
dispersion <- betadisper(perm_dist_2024_site, group = exp_data_24_clean$Site, type = "centroid")
#create distance matrix for PERMANOVA
perm_dist_2024_site <- vegdist(exp_data_matrix, method = 'bray')
#check assumptions
dispersion <- betadisper(perm_dist_2024_site, group = exp_data_24_clean$Site, type = "centroid")
plot(dispersion)
anova(dispersion)
permanova_exp_24_site <- adonis2(perm_dist_2024_site~as.factor(exp_data_24_clean$Site), data = perm_dist_2024_site, permutations = 9999)
permanova_exp_24_site
write.csv(permanova_exp_24_site, file = "../Results/Permanova_results_subset_site.csv")
# Load necessary libraries
library(ggplot2)
# Assuming you have already loaded the datasets exp_data_24_dates and nmds_scores_24_subset
# Merge the Treatment column from exp_data_24_dates with the NMDS scores
plot_data_site <- data.frame(
Treatment = exp_data_24_clean$Site,
NMDS1 = nmds_scores_24$MDS1,
NMDS2 = nmds_scores_24$MDS2
)
# Create the plot with custom colors
ggplot(plot_data_site, aes(x = NMDS1, y = NMDS2, color = Treatment)) +
geom_point(size = 3) +  # Add points with size
stat_ellipse(type = "t", level = 0.95) +  # Add ellipses around each group with 95% confidence interval
scale_color_manual(values = c(
"North" = "#57733C",
"South" = "#592246"
)) +  # Manually specify the colors for each Treatment
labs(
title = "NMDS Plot by Treatment",
x = "NMDS1",
y = "NMDS2",
color = "Treatment"
) +
theme_minimal()  # Use a minimal theme for the plot
write.csv(permanova_exp_24_site, file = "../Results/Permanova_results_end_site.csv")
#sum all barnacles
exp_data_24_clean$All_Barnacle <- exp_data_24_clean$Chthamalus + exp_data_24_clean$Amphibalanus + exp_data_24_clean$Tetraclita + exp_data_24_clean$Megabalanus + exp_data_24_clean$Tetraclita_dead + exp_data_24_clean$Dark.Brown.Barnacle..look.up.later.
exp_data_24_clean <- read.csv("~/Documents/GitHub/Tropical_Predation_Panama/Data/exp_data_24_clean.csv")
#sum all barnacles
exp_data_24_clean$All_Barnacle <- exp_data_24_clean$Chthamalus + exp_data_24_clean$Amphibalanus + exp_data_24_clean$Tetraclita + exp_data_24_clean$Megabalanus + exp_data_24_clean$Tetraclita_dead + exp_data_24_clean$Dark.Brown.Barnacle..look.up.later.
#sum all algae except corraline
exp_data_24_clean$all_algae <- exp_data_24_clean$Fleshy_algae + exp_data_24_clean$Algal_crust
#convert dates to date format
class(exp_data_24_clean$Date)
exp_data_24_clean$Date <- as.Date(exp_data_24_clean$Date, format = "%m/%d/%Y")
#only include dates outside feb
exp_data_24_clean <- exp_data_24_clean[exp_data_24_clean$Date >= "2024-03-01" & exp_data_24_clean$Date <= "2024-08-30",]
#delete unnecesssary columns (ones that were combined to better metrics)
exp_data_24_clean <- subset(exp_data_24_clean, select= -c(Chthamalus, Amphibalanus, Tetraclita, Megabalanus, Tetraclita_dead, Dark.Brown.Barnacle..look.up.later., Fleshy_algae, Algal_crust, sum ))
#subset data for matrix
exp_data_matrix <- exp_data_24_clean[,7:21]
#run NMDS with bray-curtis dissamilarity
set.seed(2)
nmds_result_24 <- metaMDS(exp_data_matrix, distance = "bray")
#save scores as dataframe
nmds_scores_24 <- as.data.frame(scores(nmds_result_24$points))
#extract centroids for each treatment
group_centroids_site <- data.frame(
Site = c("Cage", "Control"),
Centroid_X = c(mean(nmds_scores_24$MDS1[exp_data_24_clean$Site == "North"]),
mean(nmds_scores_24$MDS1[exp_data_24_clean$Site == "South"])),
Centroid_Y = c(mean(nmds_scores_24$MDS2[exp_data_24_clean$Site == "North"]),
mean(nmds_scores_24$MDS2[exp_data_24_clean$Site == "South"]))
)
#create distance matrix for PERMANOVA
perm_dist_2024_site <- vegdist(exp_data_matrix, method = 'bray')
#check assumptions
dispersion <- betadisper(perm_dist_2024_site, group = exp_data_24_clean$Site, type = "centroid")
plot(dispersion)
anova(dispersion)
permanova_exp_24_site <- adonis2(perm_dist_2024_site~as.factor(exp_data_24_clean$Site), data = perm_dist_2024_site, permutations = 9999)
permanova_exp_24_site
write.csv(permanova_exp_24_site, file = "../Results/Permanova_results_middle_site.csv")
knitr::opts_chunk$set(echo = TRUE)
exp_data_24_clean <- read.csv("/Users/sarahsellke/Documents/GitHub/Tropical_Predation_Panama/Data/exp_data_24_clean.csv")
class(exp_data_24_clean$Date)
exp_data_24_clean$Date <- as.Date(exp_data_24_clean$Date, format = "%m/%d/%Y")
#only include dates outside feb
exp_data_24_dates <- exp_data_24_clean[exp_data_24_clean$Date >= "2024-03-01" & exp_data_24_clean$Date <= "2024-08-30",]
#subset data for matrix
exp_data_matrix <- exp_data_24_dates[,7:27]
#run NMDS with bray-curtis dissamilarity
set.seed(2)
nmds_result_24 <- metaMDS(exp_data_matrix, distance = "bray")
#save scores as dataframe
nmds_scores_24 <- as.data.frame(scores(nmds_result_24$points))
#extract centroids for each treatment
group_centroids <- data.frame(
Treatment = c("Cage", "Control", "Roof"),
Centroid_X = c(mean(nmds_scores_24$MDS1[exp_data_24_clean$Treatment == "Cage"]),
mean(nmds_scores_24$MDS1[exp_data_24_clean$Treatment == "Control"]),
mean(nmds_scores_24$MDS1[exp_data_24_clean$Treatment == "Roof"])),
Centroid_Y = c(mean(nmds_scores_24$MDS2[exp_data_24_clean$Treatment == "Cage"]),
mean(nmds_scores_24$MDS2[exp_data_24_clean$Treatment == "Control"]),
mean(nmds_scores_24$MDS2[exp_data_24_clean$Treatment == "Roof"]))
)
#create dataframe for plot - confusing dont use yet
plot_data <- data.frame(
Treatment = exp_data_24_dates$Treatment,
NMDS1 = nmds_scores_24$MDS1,
NMDS2 = nmds_scores_24$MDS2,
)
#create distance matrix for PERMANOVA
perm_dist_2024 <- vegdist(exp_data_matrix, method = 'bray')
#check assumptions
dispersion <- betadisper(perm_dist_2024, group = exp_data_24_dates$Treatment, type = "centroid")
plot(dispersion)
anova(dispersion)
permanova_exp_24 <- adonis2(perm_dist_2024~as.factor(exp_data_24_dates$Treatment), data = perm_dist_2024, permutations = 9999)
permanova_exp_24
write.csv(permanova_exp_24, file = "../Results/Permanova_results_treatment_middle_dates.csv")
knitr::opts_chunk$set(echo = TRUE)
#prep data
library(readxl)
library(tidyverse)
library(dplyr)
library(plotrix)
library(lubridate)
MasterData <- read_excel("Master_Data_Sheet_KRC.xlsx") # you will have to change the directory to where you saved the file, then you should be able to upload
setwd("~/Documents/GitHub/Dotson_SURE_Kelp_Nutrients")
#prep data
library(readxl)
library(tidyverse)
library(dplyr)
library(plotrix)
library(lubridate)
MasterData <- read_excel("Master_Data_Sheet_KRC.xlsx") # you will have to change the directory to where you saved the file, then you should be able to upload
MasterData <- read_excel("../Master_Data_Sheet_KRC.xlsx") # you will have to change the directory to where you saved the file, then you should be able to upload
MasterData <- read_excel("/Users/sarahsellke/Documents/GitHub/Dotson_SURE_Kelp_Nutrients/Master_Data_Sheet_KRC_1.xlsx") # you will have to change the directory to where you saved the file, then you should be able to upload
MasterData <- read_excel("/Users/sarahsellke/Documents/GitHub/Dotson_SURE_Kelp_Nutrients/Master_Data_Sheet_KRC_1.xlsx") # you will have to change the directory to where you saved the file, then you should be able to upload
as.Date(MasterData$Date, format="%Y-%d-%m")
MasterData$Julian_date <- yday(MasterData$Date)
MasterData$month <- format(MasterData$Date, '%m')
names(MasterData)[2] <- 'site'
names(MasterData)[7] <- 'recruits'
names(MasterData)[8] <- 'tide'
names(MasterData)[4] <- 'transect'
MasterData$PlotID <- paste(MasterData$site, MasterData$transect, MasterData$`Meter #`, sep = ".")
Transect_Avg <- MasterData %>%
group_by(Date, site, Species, transect) %>%
summarise(average_value = mean(recruits))
Transect_Avg <- Transect_Avg %>%
mutate(cape = case_when(
site %in% c('FC', 'BB') ~ 'Foulweather',   # Assign 'Foulweather' for FC and BB
site %in% c('SH', 'YB', 'TK') ~ 'Perpetua', # Assign 'Perpetua' for SH, YB, and TK
site %in% c('CB', 'RP') ~ 'Blanco',        # Assign 'Blanco' for CB and RP
TRUE ~ 'Unknown'                           # For any other site, assign 'Unknown'
))
View(Transect_Avg)
View(MasterData)
library(zoo)
MasterData$YearMonth <- as.yearmon(MasterData$Date)
MasterData$YearMonth <- as.yearmon(MasterData$Date)
Transect_Avg <- MasterData %>%
group_by(YearMonth, site, Species, transect) %>%
summarise(average_value = mean(recruits))
View(Transect_Avg)
?left_join
?write.csv
#save the transect average dataframe
write.csv(Transect_Avg, file = ".//Kelp_Averages_Clean.csv")
knitr::opts_chunk$set(echo = TRUE)
#prep data
library(readxl)
library(tidyverse)
library(dplyr)
library(plotrix)
library(lubridate)
Chl24Data <- read_excel("2024_chlorophyll.xlsx") # you will have to change the directory to where you saved the file, then you should be able to upload
as.Date(Chl24Data$Date, format="%Y-%m-%d")
Chl24Data$month <- format(Chl24Data$Date, '%m')
Chl24Data$YearMonth <- as.yearmon(Chl24Data$Date)
Chl24Data <- Chl24Data %>%
mutate(cape = case_when(
SiteCode %in% c('FC', 'BB') ~ 'Foulweather',   # Assign 'Foulweather' for FC and BB
SiteCode %in% c('SH', 'YB', 'TK') ~ 'Perpetua', # Assign 'Perpetua' for SH, YB, and TK
SiteCode %in% c('CB', 'RP') ~ 'Blanco',        # Assign 'Blanco' for CB and RP
TRUE ~ 'Unknown'                           # For any other site, assign 'Unknown'
))
write.csv(Chl24Data, file = ".//Chlorophyll_data_24_clean.csv")
?left_join
#join dataframes (make sure you've done the chlorophyll one first)
chlData <- read.csv(".//Chlorophyll_data_24_clean.csv")
KelpData <- read.csv(".//Kelp_Averages_Clean.csv")
left_join(chlData, KelpData, by = YearDate )
left_join(chlData, KelpData, by = "YearDate" )
left_join(chlData, KelpData, by = "YearMonth" )
View(Chl24Data)
Chl24DataClean <- Chl24Data[,1:4 + 10:11]
Columns <- c(1:4, 10, 11)
Chl24DataClean <- Chl24Data[,Columns]
View(Chl24DataClean)
write.csv(Chl24DataClean, file = ".//Chlorophyll_data_24_clean.csv")
#join dataframes (make sure you've done the chlorophyll one first)
chlData <- read.csv(".//Chlorophyll_data_24_clean.csv")
left_join(chlData, KelpData, by = "YearMonth" )
MasterData$YearMonthSite <- paste(MasterData$YearMonth, MasterData$site, sep="_")
MasterData$YearMonthSite <- paste(MasterData$YearMonth, MasterData$site, sep="_")
Transect_Avg <- MasterData %>%
group_by(YearMonthSite, Species, transect) %>%
summarise(average_value = mean(recruits))
Transect_Avg <- Transect_Avg %>%
mutate(cape = case_when(
site %in% c('FC', 'BB') ~ 'Foulweather',   # Assign 'Foulweather' for FC and BB
site %in% c('SH', 'YB', 'TK') ~ 'Perpetua', # Assign 'Perpetua' for SH, YB, and TK
site %in% c('CB', 'RP') ~ 'Blanco',        # Assign 'Blanco' for CB and RP
TRUE ~ 'Unknown'                           # For any other site, assign 'Unknown'
))
Transect_Avg <- Transect_Avg %>%
mutate(cape = case_when(
site %in% c('FC', 'BB') ~ 'Foulweather',   # Assign 'Foulweather' for FC and BB
site %in% c('SH', 'YB', 'TK') ~ 'Perpetua', # Assign 'Perpetua' for SH, YB, and TK
site %in% c('CB', 'RP') ~ 'Blanco',        # Assign 'Blanco' for CB and RP
TRUE ~ 'Unknown'                           # For any other site, assign 'Unknown'
))
MasterData$YearMonthSite <- paste(MasterData$YearMonth, MasterData$site, sep="_")
Transect_Avg <- MasterData %>%
group_by(YearMonth, site, Species, transect) %>%
summarise(average_value = mean(recruits))
Transect_Avg$YearMonthSite <- paste(Transect_Avg$YearMonth, Transect_Avg$site, sep="_")
Transect_Avg <- Transect_Avg %>%
mutate(cape = case_when(
site %in% c('FC', 'BB') ~ 'Foulweather',   # Assign 'Foulweather' for FC and BB
site %in% c('SH', 'YB', 'TK') ~ 'Perpetua', # Assign 'Perpetua' for SH, YB, and TK
site %in% c('CB', 'RP') ~ 'Blanco',        # Assign 'Blanco' for CB and RP
TRUE ~ 'Unknown'                           # For any other site, assign 'Unknown'
))
?write.csv
#save the transect average dataframe
write.csv(Transect_Avg, file = ".//Kelp_Averages_Clean.csv")
KelpData <- read.csv(".//Kelp_Averages_Clean.csv")
Chl24DataClean$YearMonthSite <- paste(Chl24DataClean$YearMonth, Chl24DataClean$site, sep="_")
View(Chl24DataClean)
Chl24DataClean$YearMonthSite <- paste(Chl24DataClean$YearMonth, Chl24DataClean$SiteCode, sep="_")
View(KelpData)
write.csv(Chl24DataClean, file = ".//Chlorophyll_data_24_clean.csv")
#join dataframes (make sure you've done the chlorophyll one first)
chlData <- read.csv(".//Chlorophyll_data_24_clean.csv")
left_join(chlData, KelpData, by = "YearMonthSite" )
Combined_Data <- left_join(chlData, KelpData, by = "YearMonthSite" )
View(Combined_Data)
lm(formula = Combined_Data$average_value ~ Combined_Data$Chl.a, na.action = na.omit)
ggplot(data=Combined_Data, aes(x=Chl.a, y=average_value, group=1)) +
geom_line()+
geom_point()
Transect_Avg <- MasterData %>%
group_by(YearMonth, site, Species) %>%
summarise(average_value = mean(recruits))
Transect_Avg$YearMonthSite <- paste(Transect_Avg$YearMonth, Transect_Avg$site, sep="_")
Transect_Avg <- Transect_Avg %>%
mutate(cape = case_when(
site %in% c('FC', 'BB') ~ 'Foulweather',   # Assign 'Foulweather' for FC and BB
site %in% c('SH', 'YB', 'TK') ~ 'Perpetua', # Assign 'Perpetua' for SH, YB, and TK
site %in% c('CB', 'RP') ~ 'Blanco',        # Assign 'Blanco' for CB and RP
TRUE ~ 'Unknown'                           # For any other site, assign 'Unknown'
))
?write.csv
#save the transect average dataframe
write.csv(Transect_Avg, file = ".//Kelp_Averages_Clean.csv")
?left_join
#join dataframes (make sure you've done the chlorophyll one first)
chlData <- read.csv(".//Chlorophyll_data_24_clean.csv")
KelpData <- read.csv(".//Kelp_Averages_Clean.csv")
Combined_Data <- left_join(chlData, KelpData, by = "YearMonthSite" )
Combined_Data_month_average <- MasterData %>%
group_by(YearMonth, site, Species, transect) %>%
summarise(average_value = mean(recruits))
#fake linear regression
lm(formula = Combined_Data$average_value ~ Combined_Data$Chl.a, na.action = na.omit)
ggplot(data=Combined_Data, aes(x=Chl.a, y=average_value, group=1)) +
geom_line()+
geom_point()
#fake linear regression
Hedophyllum <- subset( Combined_Data, Species =='Hedophyllum sessile')
lm(formula = Hedophyllum$average_value ~ Hedophyllum$Chl.a, na.action = na.omit)
ggplot(data=Hedophyllum, aes(x=Chl.a, y=average_value, group=1)) +
geom_line()+
geom_point()
Alaria <- subset( Combined_Data, Species =='Alaria marginata')
lm(formula = Alaria$average_value ~ Alaria$Chl.a, na.action = na.omit)
ggplot(data=Alaria, aes(x=Chl.a, y=average_value, group=1)) +
geom_line()+
geom_point()
Laminaria <- subset( MasterData, Species =='Laminaria sinclairii')
lm(formula = Laminaria$average_value ~ Laminaria$Chl.a, na.action = na.omit)
Postelsia <- subset( MasterData, Species =='Postelsia palmaeformis')
lm(formula = Postelsia$average_value ~ Postelsia$Chl.a, na.action = na.omit)
View(Postelsia)
Postelsia <- subset( Combined_Data, Species =='Postelsia palmaeformis')
lm(formula = Postelsia$average_value ~ Postelsia$Chl.a, na.action = na.omit)
ggplot(data=Postelsia, aes(x=Chl.a, y=average_value, group=1)) +
geom_line()+
geom_point()
Laminaria <- subset( Combined_Data, Species =='Laminaria sinclairii')
lm(formula = Laminaria$average_value ~ Laminaria$Chl.a, na.action = na.omit)
ggplot(data=Laminaria, aes(x=Chl.a, y=average_value, group=1)) +
geom_line()+
geom_point()
Lessoniopsis <- subset( Combined_Data, Species =='Lessoniopsis littoralis')
lm(formula = Lessoniopsis$average_value ~ Lessoniopsis$Chl.a, na.action = na.omit)
ggplot(data=Lessoniopsis, aes(x=Chl.a, y=average_value, group=1)) +
geom_line()+
geom_point()
HedoLM <- lm(formula = Hedophyllum$average_value ~ Hedophyllum$Chl.a, na.action = na.omit)
summary (HedoLM)
AlariaLM <- lm(formula = Alaria$average_value ~ Alaria$Chl.a, na.action = na.omit)
summary(AlariaLM)
PostLM <- lm(formula = Postelsia$average_value ~ Postelsia$Chl.a, na.action = na.omit)
summary(PostLM)
LamLM <- lm(formula = Laminaria$average_value ~ Laminaria$Chl.a, na.action = na.omit)
summary(LamLM)
LessLM <- lm(formula = Lessoniopsis$average_value ~ Lessoniopsis$Chl.a, na.action = na.omit)
summary(LessLM)
Egregia <- subset( Combined_Data, Species =='Egregia menziesii')
EgrLM <- lm(formula = Egregia$average_value ~ Egregia$Chl.a, na.action = na.omit)
summary(EgrLM)
ggplot(data=Egregia, aes(x=Chl.a, y=average_value, group=1)) +
geom_line()+
geom_point()
